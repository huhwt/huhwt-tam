<!--///////////////////////////////////////////////////////////////////////////////
//
// Topographic Attribute Maps Demo
// Copyright 2020 Reinhold Preiner, Johanna Schmidt, Gabriel Mistelbauer
//
// This code is licensed under an MIT License.
// See the accompanying LICENSE file for details.
//
///////////////////////////////////////////////////////////////////////////////-->


<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Topographic Attribute Map</title>

	<script src="https://d3js.org/d3.v5.min.js"></script>
	<!--<script src="d3.v5.min.js"></script>-->
    <script src="i18n.js"></script>
    <script src="translations.js"></script>
    <script src="gedcom.js"></script>
	<script src="scalarfield.js"></script>
	<script src="interaction.js"></script>
	<script src="TAMrenderer.js"></script>
	<script src="TFMrenderer.js"></script>
	<script src="utils.js"></script>
	<script src="export.js"></script>
	<script src="openFile.js"></script>
	<script src="menubar.js"></script>
	<link rel="stylesheet" type="text/css" href="tam.css">
</head>

<body>
	<div id="menubar">
	</div>
	<!-------------------------------------------------------------------------------------->
	<div id="canvas">
		<svg id="tam" xmlns="http://www.w3.org/2000/svg" viewBox="-5000 -3000 6000 6000" preserveAspectRatio="xMinYMin meet">
			<defs>
				<marker id="arrow" viewBox="0 0 8 8" refX="6" refY="4"
					markerWidth="6" markerHeight="6"
					orient="auto-start-reverse"
					fill="black"
					fill-opacity="1">
				  <path d="M 0 0 L 8 4 L 0 8 z" />
				</marker>
				<filter id="dropshadow" x="-60%" y="-60%" height="300%" width="300%">
					<feOffset result="offOut" in="SourceAlpha" dx="4" dy="4" />
					<feGaussianBlur result="blurOut" in="offOut" stdDeviation="5" />
					<feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
				</filter>
			</defs>
		</svg>
	</div>

	<div id="overlay" style="display: none;">
		<div id="background" onclick="closeModal()"></div>
		<div class="modal">
			<button type="button" class="close" onclick="closeModal()" alt="close">×</button>
			<h1>Cannot find GEDCOM file</h1>
			<p><i><span id="missing-ged-file-name">unknown</span></i></p>
			<p>Please select it from your computer, or <br />make sure it is placed within the subfolder <i>\data</i>.</p>
			<form name="data-source">
				<label for="modal-file-upload" class="custom-button">Open file</label>
				<input type="file" id="modal-file-upload" onchange="processModalFileUpload()" accept=".ged" class="input-file">
			</form>
		</div>
	</div>

<script>
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///  DATA LOADING

var folder = "data";

// default view
//var PARAM_FILENAME = "MA.json";

// gedcom view with family circles
var PARAM_FILENAME = "MA.ged";

var PARAM_PROCREATION_AGE = 20;

let mbHTML = MENUBAR_html();
let MBelmnt = document.getElementById("menubar");
MBelmnt.innerHTML = mbHTML;

//////////////////////////////
// Don't change anything below

var PARAM_SOURCE_FILE = ""; // original data source (e.g. ".ged" file), which will be referenced in ".tfm" files
var renderer = null;

// Load data and create force graph (see openFile.js).
// Uses folder and PARAM_FILENAME from above.
loadFileFromDisk();


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
</script>

</body>
</html>
